var $jscomp={scope:{},findInternal:function(d,a,b){d instanceof String&&(d=String(d));for(var c=d.length,e=0;e<c;e++){var h=d[e];if(a.call(b,h,e,d))return{i:e,v:h}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(d,a,b){if(b.get||b.set)throw new TypeError("ES3 does not support getters and setters.");d!=Array.prototype&&d!=Object.prototype&&(d[a]=b.value)};
$jscomp.getGlobal=function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(d,a,b,c){if(a){b=$jscomp.global;d=d.split(".");for(c=0;c<d.length-1;c++){var e=d[c];e in b||(b[e]={});b=b[e]}d=d[d.length-1];c=b[d];a=a(c);a!=c&&null!=a&&$jscomp.defineProperty(b,d,{configurable:!0,writable:!0,value:a})}};
$jscomp.polyfill("Array.prototype.find",function(d){return d?d:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6-impl","es3");jQuery(document).ready(function(){jQuery("input.text.googleaddress").each(function(d,a){GoogleAddressFieldInstatiator.init(jQuery(a))});GoogleAddressFieldInstatiator.attachInCMS()});
var GoogleAddressFieldInstatiator={init:function(d){d.each(function(){if("done"!==jQuery(this).attr("data-instantiated")){var a=jQuery(this).data();a.name=jQuery(this).attr("name");jQuery(this).attr("data-instantiated","done");var b=new GoogleAddressField(a.name),c;for(c in a){if("relatedfields"===c)var e=a[c].replace(/&quot;/g,'"'),e=JSON.parse(e);else e=a[c];"false"===e&&(e=!1);"true"===e&&(e=!0);a.hasOwnProperty(c)&&b.setVar(c,e)}b.init()}})},attachInCMS:function(){"undefined"!==typeof jQuery.entwine&&
jQuery.entwine(function(d){d("input.text.googleaddress").entwine({onmatch:function(){d("input.text.googleaddress").each(function(a,b){GoogleAddressFieldInstatiator.init(d(b))})}})})}},GoogleAddressField=function(d){var a={debug:!1,defaultAddress:"",fieldName:d,entryField:null,entryFieldHolder:null,entryFieldRightLabel:null,entryFieldLeftLabel:null,useSensor:!1,autocomplete:null,relatedFields:{},alwaysShowFields:!0,findNewAddressText:"",errorMessageMoreSpecific:"",selectedOptionNotAllowed:"",errorMessageAddressNotFound:"",
hasTextClass:"hasText",useMeClass:"useMe",selectedClass:"selected",bypassSelector:"a.bypassGoogleGeocoding",returnSelector:"a.returnGoogleGeocoding",viewGoogleMapLinkSelector:"a.viewGoogleMapLink",classForUncompletedField:"holder-required",byPassClass:"field-is-hidden",googleStaticMapLink:"",defaultWidthOfStaticImage:300,defaultHeightOfStaticImage:300,urlForViewGoogleMapLink:"http://maps.google.com/maps/search/",linkLabelToViewMap:"View Map",percentageToBeCompleted:.25,typeToBeReturned:"address",
restrictToCountryCode:"",init:function(){if("undefined"===typeof google)console.debug("google map library is not loaded!"),jQuery(".field.googleaddress").hide(),this.alwaysShowFields=!0;else{a.entryField=jQuery('input[name="'+a.fieldName+'"]');a.entryFieldHolder=jQuery(a.entryField).closest("div.field");a.entryFieldRightLabel=a.entryFieldHolder.find("label.right");a.entryFieldLeftLabel=a.entryFieldHolder.find("label.left");a.hideFields();a.setResults("no");a.updateEntryFieldStatus();var b=a.entryField.attr("id"),
c={types:[a.typeToBeReturned]};a.restrictToCountryCode&&(c.componentRestrictions={country:a.restrictToCountryCode});b=document.getElementById(b);a.autocomplete=new google.maps.places.Autocomplete(b,c);google.maps.event.addListener(a.autocomplete,"place_changed",function(){a.fillInAddress()});a.entryField.focusin(function(){a.hideFields();a.useSensor&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(b){b=new google.maps.LatLng(b.coords.latitude,b.coords.longitude);a.autocomplete.setBounds(new google.maps.LatLngBounds(b,
b))});a.updateEntryFieldStatus()}).focusout(function(){a.hasResults()&&a.showFields();a.updateEntryFieldStatus()}).keypress(function(a){if(13==a.which)return!1}).on("input propertychange paste",function(b){a.hasResults()&&(a.clearFields(),a.setResults("no"),a.updateEntryFieldStatus())});(function(a){function b(b,e){if("keydown"==b){var d=e;e=function(b){var c=0<jQuery(".pac-item-selected").length;13!=b.which||c||(c=jQuery.Event("keydown",{keyCode:40,which:40}),d.apply(a,[c]));d.apply(a,[b])}}c.apply(a,
[b,e])}var c=a.addEventListener?a.addEventListener:a.attachEvent;a.addEventListener=b;a.attachEvent=b})(b);a.entryFieldHolder.on("click",a.bypassSelector,function(b){b.preventDefault();a.showFields();a.entryFieldHolder.addClass(a.byPassClass);return!1});jQuery(a.returnSelector).on("click",function(b){b.preventDefault();a.hideFields();a.entryFieldHolder.removeClass(a.byPassClass);return!1});a.alreadyHasValues()&&!a.entryFieldHolder.is(":hidden")&&(a.showFields(),a.entryFieldLeftLabel.text(a.findNewAddressText));
a.entryFieldHolder.find(a.viewGoogleMapLinkSelector).attr("target","_googleMap");0<a.entryField.val().length&&(a.entryField.attr("placeholder",a.entryField.val()),a.entryField.val(""));"string"===typeof a.defaultAddress&&0<a.defaultAddress.length&&(a.loadDefaultAddress(),a.entryField.val(a.defaultAddress));jQuery(a.entryField).closest("form").on("click","input[type=submit]",function(b){a.showFields()})}},fillInAddress:function(){if("undefined"===typeof b)var b=a.autocomplete.getPlace();a.entryField.attr("data-has-result",
"no");a.debug&&console.log(b);var c=!1;if("undefined"!==typeof b){var e=b.address_components;"undefined"===typeof e&&(e=b.types);"undefined"!==typeof e&&(c=!0);e=a.entryFieldHolder.find(a.viewGoogleMapLinkSelector);if(c)if(c=encodeURIComponent(b.formatted_address),e.attr("href",a.urlForViewGoogleMapLink+c),(c=a.getStaticMapImage(c))?e.html('<img src="'+c+'" alt="Google Map" />'):e.html(a.linkLabelToViewMap),b&&b.address_components){b.address_components.push({long_name:b.formatted_address,short_name:b.formatted_address,
types:["formatted_address"]});for(var d in a.relatedFields){if(a.relatedFields.hasOwnProperty(d))if(e=[],c=jQuery("input[name='"+d+"'],select[name='"+d+"'],textarea[name='"+d+"']"),jQuery(c).closest("div.field"),0<c.length){c.show().val("");a.debug&&console.debug("- checking form field: "+d+" now searching for data ...");for(var k=0;k<b.address_components.length;k++){a.debug&&console.debug("- -----  ----- ----- provided information: "+b.address_components[k].long_name);for(var n=0;n<b.address_components[k].types.length;n++){var l=
b.address_components[k].types[n];a.debug&&console.debug("- ----- ----- ----- ----- ----- ----- found Google Info for: "+l);for(var m in a.relatedFields[d])if(a.relatedFields[d].hasOwnProperty(m)&&(a.debug&&console.debug("- ----- ----- ----- ----- ----- ----- ----- ----- ----- with form field checking: "+m+" is the same as google type: "+l),m==l)){var f=a.relatedFields[d][m],g=b.address_components[k][f];if(-1==jQuery.inArray(g,e)){e.push(g);a.debug&&console.debug("- ***** ***** ***** ***** ***** ***** ***** ***** ***** ***** ***** ***** setting: "+
d+" to "+g+", using "+f+" in google address");f="";g=g.trim();"subpremise"==l&&(g+="/");c.is("input")&&(f=jQuery('input[name="'+d+'"]').val(),g=f+" "+g);c.is("textarea")&&(f=jQuery('textarea[name="'+d+'"]').val(),g=f+" "+g);if(c.is("select")){var p=!1;$(c).find("option").each(function(){jQuery(this).val()==g&&(p=!0)});p||(f=jQuery(c).attr("id"),f=jQuery('label[for="'+f+'"'),f=jQuery(f).text(),alert(a.selectedOptionNotAllowed+" "+f+"."),jQuery(c).focus())}c.val(g.trim());a.setResults("yes")}else a.debug&&
console.debug("- ----- ----- ----- ----- ----- ----- ----- ----- ----- data already used: "+g)}}}}else a.debug&&console.debug("E -----  ----- ----- could not find form field with ID: #"+d+"");a.entryFieldLeftLabel.text(a.findNewAddressText)}}else a.entryField.val(a.errorMessageAddressNotFound);else a.entryField.val(a.errorMessageMoreSpecific),e.attr("href",a.urlForViewGoogleMapLink).html("");a.updateEntryFieldStatus();a.hasResults()&&a.showFields()}},showFields:function(){for(var b in a.relatedFields){var c=
jQuery("input[name='"+b+"'],select[name='"+b+"'],textarea[name='"+b+"']"),d=jQuery(c).closest("div.field");"hidden"!==c.attr("type")&&(d.removeClass("hide").addClass("show"),d.find("select[data-has-required='yes'], input[data-has-required='yes']").each(function(a,b){jQuery(b).attr("required","required").removeAttr("data-has-required")}))}a.entryField.removeAttr("required");a.entryFieldHolder.removeAttr("required");jQuery(a.entryFieldHolder).prev().show()},hideFields:function(){if(!0!==this.alwaysShowFields){var b=
!1,c;for(c in a.relatedFields){var d=jQuery("input[name='"+c+"'],select[name='"+c+"'],textarea[name='"+c+"']"),h=jQuery(d).closest("div.field");"hidden"===d.attr("type")||h.hasClass(a.classForUncompletedField)||(h.removeClass("show").addClass("hide"),h.find("select[required='required'], input[required='required'], textarea[required='required']").each(function(a,c){jQuery(c).attr("data-has-required","yes").removeAttr("required");b=!0}))}a.entryFieldHolder.is(":visible")&&b?(a.entryField.attr("required",
"required"),a.entryFieldHolder.attr("required","required")):(a.entryField.removeAttr("required"),a.entryFieldHolder.removeAttr("required"))}},alreadyHasValues:function(){var b=0,c=0,d;for(d in a.relatedFields){var h=jQuery("input[name='"+d+"'],select[name='"+d+"'],textarea[name='"+d+"']"),h=jQuery(h).closest("div.field");jQuery(h).find("select, input, textarea").each(function(a,d){c++;""!=jQuery(d).val()&&0!=jQuery(d).val()||b++})}return b/c<=a.percentageToBeCompleted?!0:!1},clearFields:function(){for(var b in a.relatedFields)jQuery("#"+
b).find("select, input, textarea").val("")},setResults:function(b){return a.entryField.attr("data-has-result",b)},hasResults:function(){return"yes"==a.entryField.attr("data-has-result")?!0:!1},updateEntryFieldStatus:function(){var b=a.entryField.val(),c=a.hasResults(),b=1<b.length;c?(a.entryFieldHolder.addClass(a.selectedClass),a.entryFieldHolder.removeClass(a.useMeClass),a.entryFieldHolder.find(a.viewGoogleMapLinkSelector).show()):(a.entryFieldHolder.removeClass(a.selectedClass),a.entryFieldHolder.addClass(a.useMeClass),
a.entryFieldHolder.find(a.viewGoogleMapLinkSelector).hide());b?a.entryField.addClass(a.hasTextClass):a.entryField.removeClass(a.hasTextClass)},getStaticMapImage:function(b){if(a.googleStaticMapLink){var c=a.googleStaticMapLink,c=c.replace("[ADDRESS]",b,"gi"),c=c.replace("[ADDRESS]",b,"gi"),c=c.replace("[ADDRESS]",b,"gi");b=a.entryFieldHolder.find("input").outerWidth();b||(b=a.defaultWidthOfStaticImage);b&&(c=c.replace("[MAXWIDTH]",b,"gi"),c=c.replace("[MAXWIDTH]",b,"gi"));b||(b=a.defaultHeightOfStaticImage);
b&&(c=c.replace("[MAXHEIGHT]",b,"gi"),c=c.replace("[MAXHEIGHT]",b,"gi"));return c}},loadDefaultAddress:function(){var a=this,c=new google.maps.Geocoder,d={};d.address=a.defaultAddress;c.geocode(d,function(b,c){c==google.maps.GeocoderStatus.OK&&0<b.length&&a.fillInAddress(b[0])})}};return{getVar:function(b){if(a.hasOwnProperty(b))return a[b]},setVar:function(b,c){for(var d in a)a.hasOwnProperty(d)&&d.toLowerCase()==b&&(a[d]=c);return this},init:function(){a.init();return this}}};
